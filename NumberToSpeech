import java.util.Scanner;
import javax.sound.sampled.*;
import java.io.File;

public class NumberToSpeech {

    private static final String AUDIO_PATH = "audio//"; // افتراضاً ان مجلد اوديو في نفس مسار ملف البرنامج
    
    public static void numberToSpeech(int num) { // الدالة الأساسية
        if (num == 0) {                          // الصفر حالة خاصة
            playSound("0.wav");
            return;
        }
        threeDigitToSpeech(num);                 // بدء الخوارزمية للتعرف على الرقم المدخل
    }

    private static void twoDigitToSpeech(int n) {
        if (n < 10) {
            playSound(n + ".wav");
        } else if (n > 10 && n < 20) {
            playSound(n + ".wav");
        } else if (n % 10 == 0) {
            playSound(n + ".wav");
        } else {
            playSound(n % 10 + ".wav");
            playSound("and.wav");
            playSound((n / 10) * 10 + ".wav");
        }
    }

    private static void threeDigitToSpeech(int n) {
        if (n == 100) {
            playSound("100.wav");
        } else if (n == 200) {
            playSound("200.wav");
        } else if (n < 100) {
            twoDigitToSpeech(n);
        } else if (n % 100 == 0) {
            playSound((n / 100) + "00.wav");
        } else {
            playSound(n / 100 + "00.wav");
            playSound("and.wav");
            twoDigitToSpeech(n % 100);
        }
    }

    private static void playSound(String fileName) { // دالة الصوت باستخدام مكتبة sound sampled , javax 
        try {
            File audioFile = new File(AUDIO_PATH + fileName);
            if (!audioFile.exists()) {
                System.out.println("Error: Audio file not found - " + fileName);
                return;
            }
            AudioInputStream audioStream = AudioSystem.getAudioInputStream(audioFile);
            Clip clip = AudioSystem.getClip();
            clip.open(audioStream);
            clip.start();
            Thread.sleep(clip.getMicrosecondLength() / 1000);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        System.out.print("أدخل رقماً بين 0 و 999: ");
        int num = scanner.nextInt();
        if (num < 0 || num > 999) {
            System.out.println("الرجاء إدخال رقم ضمن النطاق المسموح (0-999).");
        } else {
            numberToSpeech(num);
        }
        scanner.close();
    }
}
